<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Documentation - Alive5 Voice Agent</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
            padding: 40px 0;
        }

        .header h1 {
            font-size: 3.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.3rem;
            opacity: 0.9;
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 2rem;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        .card h3 {
            color: #764ba2;
            margin: 20px 0 10px 0;
            font-size: 1.4rem;
        }

        .endpoint {
            background: #f8f9ff;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 5px solid #667eea;
        }

        .endpoint h4 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .method {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-weight: bold;
            margin-right: 10px;
        }

        .method.get {
            background: #48bb78;
            color: white;
        }

        .method.post {
            background: #4299e1;
            color: white;
        }

        .method.delete {
            background: #f56565;
            color: white;
        }

        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
        }

        .code-block .comment {
            color: #68d391;
        }

        .code-block .string {
            color: #fbb6ce;
        }

        .code-block .keyword {
            color: #90cdf4;
        }

        .code-block .number {
            color: #f6ad55;
        }

        .table-container {
            overflow-x: auto;
            margin: 20px 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }

        th {
            background: #667eea;
            color: white;
            font-weight: 600;
        }

        tr:hover {
            background: #f8f9ff;
        }

        .badge {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            margin: 2px;
        }

        .badge.success {
            background: #48bb78;
        }

        .badge.warning {
            background: #ed8936;
        }

        .badge.error {
            background: #f56565;
        }

        .badge.info {
            background: #4299e1;
        }

        .highlight {
            background: linear-gradient(120deg, #a8edea 0%, #fed6e3 100%);
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: bold;
        }

        .toc {
            background: #f8f9ff;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .toc h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .toc ul {
            list-style: none;
        }

        .toc li {
            margin: 8px 0;
        }

        .toc a {
            color: #667eea;
            text-decoration: none;
            padding: 5px 10px;
            border-radius: 5px;
            transition: background 0.3s ease;
        }

        .toc a:hover {
            background: #e2e8f0;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2.5rem;
            }
            
            .card {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üõ†Ô∏è API Documentation</h1>
            <p>Alive5 Voice Agent - Complete API Reference</p>
        </div>

        <!-- Table of Contents -->
        <div class="card">
            <div class="toc">
                <h3>üìã Table of Contents</h3>
                <ul>
                    <li><a href="#overview">Overview</a></li>
                    <li><a href="#authentication">Authentication</a></li>
                    <li><a href="#endpoints">Core Endpoints</a></li>
                    <li><a href="#flow-types">Flow Types</a></li>
                    <li><a href="#error-handling">Error Handling</a></li>
                    <li><a href="#rate-limiting">Rate Limiting</a></li>
                    <li><a href="#webhooks">Webhooks</a></li>
                    <li><a href="#integration">Integration Examples</a></li>
                    <li><a href="#testing">Testing</a></li>
                    <li><a href="#monitoring">Monitoring</a></li>
                    <li><a href="#security">Security</a></li>
                </ul>
            </div>
        </div>

        <!-- Overview -->
        <div class="card" id="overview">
            <h2>üåü Overview</h2>
            <p>The Alive5 Voice Agent API provides intelligent conversation flows, intent detection, and seamless human agent transfers. This document covers all available endpoints, request/response formats, and integration examples.</p>
            
            <h3>Base URL</h3>
            <ul>
                <li><strong>Development:</strong> <code>http://localhost:8000</code></li>
                <li><strong>Production:</strong> <code>https://your-backend-url.onrender.com</code></li>
            </ul>
        </div>

        <!-- Authentication -->
        <div class="card" id="authentication">
            <h2>üîê Authentication</h2>
            <p>All API endpoints use JWT tokens for authentication. Tokens are automatically generated and managed by the system.</p>
        </div>

        <!-- Core Endpoints -->
        <div class="card" id="endpoints">
            <h2>üõ†Ô∏è Core Endpoints</h2>

            <!-- Health Check -->
            <div class="endpoint">
                <h4><span class="method get">GET</span> /health</h4>
                <p>Check the health status of the API.</p>
                
                <h5>Response</h5>
                <div class="code-block">
{
  <span class="string">"status"</span>: <span class="string">"ok"</span>,
  <span class="string">"active_sessions"</span>: <span class="number">5</span>,
  <span class="string">"timestamp"</span>: <span class="number">1640995200.123</span>
}
                </div>
            </div>

            <!-- Connection Details -->
            <div class="endpoint">
                <h4><span class="method post">POST</span> /api/connection_details</h4>
                <p>Get LiveKit connection details for establishing a voice session.</p>
                
                <h5>Request Body</h5>
                <div class="code-block">
{
  <span class="string">"participant_name"</span>: <span class="string">"user123"</span>,
  <span class="string">"room_name"</span>: <span class="string">"session_123"</span>
}
                </div>

                <h5>Response</h5>
                <div class="code-block">
{
  <span class="string">"serverUrl"</span>: <span class="string">"wss://alive5-x7iklos9.livekit.cloud"</span>,
  <span class="string">"roomName"</span>: <span class="string">"session_123"</span>,
  <span class="string">"participantToken"</span>: <span class="string">"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."</span>,
  <span class="string">"participantName"</span>: <span class="string">"user123"</span>,
  <span class="string">"sessionId"</span>: <span class="string">"session_123"</span>,
  <span class="string">"expiresAt"</span>: <span class="number">1640998800</span>
}
                </div>

                <h5>Error Responses</h5>
                <ul>
                    <li><span class="badge error">400 Bad Request</span>: Missing required fields</li>
                    <li><span class="badge error">500 Internal Server Error</span>: Server configuration error</li>
                </ul>
            </div>

            <!-- Process Flow Message -->
            <div class="endpoint">
                <h4><span class="method post">POST</span> /api/process_flow_message</h4>
                <p>Process user messages through the intelligent flow system.</p>
                
                <h5>Request Body</h5>
                <div class="code-block">
{
  <span class="string">"room_name"</span>: <span class="string">"session_123"</span>,
  <span class="string">"user_message"</span>: <span class="string">"I need pricing information"</span>,
  <span class="string">"conversation_history"</span>: [
    {
      <span class="string">"role"</span>: <span class="string">"user"</span>,
      <span class="string">"content"</span>: <span class="string">"Hello"</span>,
      <span class="string">"timestamp"</span>: <span class="string">"2025-01-18T10:00:00Z"</span>
    },
    {
      <span class="string">"role"</span>: <span class="string">"assistant"</span>, 
      <span class="string">"content"</span>: <span class="string">"Hi there! How can I help you today?"</span>,
      <span class="string">"timestamp"</span>: <span class="string">"2025-01-18T10:00:01Z"</span>
    }
  ]
}
                </div>

                <h5>Response Types</h5>
                
                <h6>Flow Started</h6>
                <div class="code-block">
{
  <span class="string">"status"</span>: <span class="string">"processed"</span>,
  <span class="string">"room_name"</span>: <span class="string">"session_123"</span>,
  <span class="string">"user_message"</span>: <span class="string">"I need pricing information"</span>,
  <span class="string">"flow_result"</span>: {
    <span class="string">"type"</span>: <span class="string">"flow_started"</span>,
    <span class="string">"flow_name"</span>: <span class="string">"Pricing"</span>,
    <span class="string">"response"</span>: <span class="string">"How many phone lines do you need?"</span>,
    <span class="string">"next_step"</span>: {
      <span class="string">"type"</span>: <span class="string">"question"</span>,
      <span class="string">"text"</span>: <span class="string">"How many texts do you send a month?"</span>,
      <span class="string">"name"</span>: <span class="string">"question_ae051e94-daf6-4d3d-b4fa-296647392d64"</span>
    }
  }
}
                </div>

                <h6>Transfer Initiated</h6>
                <div class="code-block">
{
  <span class="string">"status"</span>: <span class="string">"processed"</span>,
  <span class="string">"room_name"</span>: <span class="string">"session_123"</span>, 
  <span class="string">"user_message"</span>: <span class="string">"Can I speak with someone over the phone?"</span>,
  <span class="string">"flow_result"</span>: {
    <span class="string">"type"</span>: <span class="string">"transfer_initiated"</span>,
    <span class="string">"response"</span>: <span class="string">"Connecting you to a human agent. Please wait."</span>,
    <span class="string">"flow_state"</span>: {
      <span class="string">"current_flow"</span>: <span class="keyword">null</span>,
      <span class="string">"current_step"</span>: <span class="keyword">null</span>,
      <span class="string">"conversation_history"</span>: [...]
    }
  }
}
                </div>

                <h6>FAQ Response</h6>
                <div class="code-block">
{
  <span class="string">"status"</span>: <span class="string">"processed"</span>,
  <span class="string">"room_name"</span>: <span class="string">"session_123"</span>,
  <span class="string">"user_message"</span>: <span class="string">"What are your business hours?"</span>,
  <span class="string">"flow_result"</span>: {
    <span class="string">"type"</span>: <span class="string">"faq_response"</span>,
    <span class="string">"response"</span>: <span class="string">"Our business hours are Monday-Friday 9AM-6PM EST."</span>,
    <span class="string">"urls"</span>: [<span class="string">"https://alive5.com/contact"</span>],
    <span class="string">"bot_id"</span>: <span class="string">"faq_b9952a56-fc7b-41c9-b0a0-5c662ddb039e"</span>
  }
}
                </div>
            </div>

            <!-- Update Session -->
            <div class="endpoint">
                <h4><span class="method post">POST</span> /api/sessions/update</h4>
                <p>Update session information and state.</p>
                
                <h5>Request Body</h5>
                <div class="code-block">
{
  <span class="string">"room_name"</span>: <span class="string">"session_123"</span>,
  <span class="string">"intent"</span>: <span class="string">"pricing"</span>,
  <span class="string">"status"</span>: <span class="string">"active"</span>,
  <span class="string">"flow_state"</span>: {
    <span class="string">"current_flow"</span>: <span class="string">"pricing_flow"</span>,
    <span class="string">"current_step"</span>: <span class="string">"phone_lines_question"</span>,
    <span class="string">"user_responses"</span>: {
      <span class="string">"phone_lines"</span>: <span class="string">"5"</span>,
      <span class="string">"texts_per_month"</span>: <span class="string">"2000"</span>
    }
  }
}
                </div>

                <h5>Response</h5>
                <div class="code-block">
{
  <span class="string">"message"</span>: <span class="string">"Session updated successfully"</span>,
  <span class="string">"session_id"</span>: <span class="string">"session_123"</span>,
  <span class="string">"current_intent"</span>: <span class="string">"pricing"</span>,
  <span class="string">"status"</span>: <span class="string">"active"</span>
}
                </div>
            </div>

            <!-- Get Session Info -->
            <div class="endpoint">
                <h4><span class="method get">GET</span> /api/sessions/{room_name}</h4>
                <p>Get current session information.</p>
                
                <h5>Response</h5>
                <div class="code-block">
{
  <span class="string">"session_id"</span>: <span class="string">"session_123"</span>,
  <span class="string">"participant_name"</span>: <span class="string">"user123"</span>,
  <span class="string">"intent"</span>: <span class="string">"pricing"</span>,
  <span class="string">"status"</span>: <span class="string">"active"</span>,
  <span class="string">"duration_seconds"</span>: <span class="number">120</span>,
  <span class="string">"flow_state"</span>: {
    <span class="string">"current_flow"</span>: <span class="string">"pricing_flow"</span>,
    <span class="string">"current_step"</span>: <span class="string">"phone_lines_question"</span>,
    <span class="string">"user_responses"</span>: {
      <span class="string">"phone_lines"</span>: <span class="string">"5"</span>
    }
  }
}
                </div>
            </div>

            <!-- List All Sessions -->
            <div class="endpoint">
                <h4><span class="method get">GET</span> /api/sessions</h4>
                <p>Get information about all active sessions.</p>
                
                <h5>Response</h5>
                <div class="code-block">
{
  <span class="string">"total_sessions"</span>: <span class="number">3</span>,
  <span class="string">"sessions"</span>: [
    {
      <span class="string">"session_id"</span>: <span class="string">"session_123"</span>,
      <span class="string">"participant_name"</span>: <span class="string">"user123"</span>,
      <span class="string">"intent"</span>: <span class="string">"pricing"</span>,
      <span class="string">"status"</span>: <span class="string">"active"</span>,
      <span class="string">"duration_seconds"</span>: <span class="number">120</span>
    },
    {
      <span class="string">"session_id"</span>: <span class="string">"session_456"</span>, 
      <span class="string">"participant_name"</span>: <span class="string">"user456"</span>,
      <span class="string">"intent"</span>: <span class="string">"agent_transfer"</span>,
      <span class="string">"status"</span>: <span class="string">"transferring"</span>,
      <span class="string">"duration_seconds"</span>: <span class="number">45</span>
    }
  ]
}
                </div>
            </div>

            <!-- Cleanup Room -->
            <div class="endpoint">
                <h4><span class="method delete">DELETE</span> /api/rooms/{room_name}</h4>
                <p>Clean up room resources and session data.</p>
                
                <h5>Response</h5>
                <div class="code-block">
{
  <span class="string">"message"</span>: <span class="string">"Room session_123 cleaned up successfully"</span>,
  <span class="string">"session_summary"</span>: {
    <span class="string">"duration_seconds"</span>: <span class="number">300</span>,
    <span class="string">"intent"</span>: <span class="string">"pricing"</span>,
    <span class="string">"final_status"</span>: <span class="string">"completed"</span>
  }
}
                </div>
            </div>

            <!-- Initiate Transfer -->
            <div class="endpoint">
                <h4><span class="method post">POST</span> /api/sessions/{room_name}/transfer</h4>
                <p>Initiate transfer to human agent.</p>
                
                <h5>Request Body</h5>
                <div class="code-block">
{
  <span class="string">"department"</span>: <span class="string">"sales"</span>
}
                </div>

                <h5>Response</h5>
                <div class="code-block">
{
  <span class="string">"message"</span>: <span class="string">"Transfer to sales initiated"</span>,
  <span class="string">"session_id"</span>: <span class="string">"session_123"</span>,
  <span class="string">"transfer_status"</span>: <span class="string">"initiated"</span>,
  <span class="string">"estimated_wait_time"</span>: <span class="string">"2-3 minutes"</span>
}
                </div>
            </div>
        </div>

        <!-- Flow Types -->
        <div class="card" id="flow-types">
            <h2>üîÑ Flow Types</h2>
            
            <h3>Supported Flow Result Types</h3>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Type</th>
                            <th>Description</th>
                            <th>Use Case</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span class="badge info">flow_started</span></td>
                            <td>New flow initiated</td>
                            <td>Starting a new conversation flow</td>
                        </tr>
                        <tr>
                            <td><span class="badge info">flow_response</span></td>
                            <td>Flow step response</td>
                            <td>Continuing an existing flow</td>
                        </tr>
                        <tr>
                            <td><span class="badge info">question</span></td>
                            <td>Asking user a question</td>
                            <td>Gathering information</td>
                        </tr>
                        <tr>
                            <td><span class="badge info">message</span></td>
                            <td>General message</td>
                            <td>Providing information</td>
                        </tr>
                        <tr>
                            <td><span class="badge info">faq_response</span></td>
                            <td>FAQ bot response</td>
                            <td>Answering common questions</td>
                        </tr>
                        <tr>
                            <td><span class="badge warning">transfer_initiated</span></td>
                            <td>Agent transfer started</td>
                            <td>Escalating to human agent</td>
                        </tr>
                        <tr>
                            <td><span class="badge success">conversation_end</span></td>
                            <td>Conversation completed</td>
                            <td>Ending the session</td>
                        </tr>
                        <tr>
                            <td><span class="badge error">error</span></td>
                            <td>Error occurred</td>
                            <td>Handling errors gracefully</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3>Intent Types</h3>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Intent</th>
                            <th>Description</th>
                            <th>Trigger Examples</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span class="badge success">greeting</span></td>
                            <td>Welcome message</td>
                            <td>"Hello", "Hi", "Good morning"</td>
                        </tr>
                        <tr>
                            <td><span class="badge info">pricing</span></td>
                            <td>Pricing information</td>
                            <td>"How much", "Pricing", "Cost"</td>
                        </tr>
                        <tr>
                            <td><span class="badge info">weather</span></td>
                            <td>Weather information</td>
                            <td>"Weather", "Forecast", "Temperature"</td>
                        </tr>
                        <tr>
                            <td><span class="badge warning">agent</span></td>
                            <td>Human agent request</td>
                            <td>"Speak with someone", "Talk to agent"</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Error Handling -->
        <div class="card" id="error-handling">
            <h2>‚ö†Ô∏è Error Handling</h2>
            
            <h3>HTTP Status Codes</h3>
            <ul>
                <li><span class="badge success">200 OK</span>: Request successful</li>
                <li><span class="badge error">400 Bad Request</span>: Invalid request data</li>
                <li><span class="badge error">404 Not Found</span>: Resource not found</li>
                <li><span class="badge error">500 Internal Server Error</span>: Server error</li>
            </ul>

            <h3>Error Response Format</h3>
            <div class="code-block">
{
  <span class="string">"error"</span>: <span class="string">"Error message"</span>,
  <span class="string">"details"</span>: <span class="string">"Additional error details"</span>,
  <span class="string">"timestamp"</span>: <span class="string">"2025-01-18T10:00:00Z"</span>
}
            </div>
        </div>

        <!-- Rate Limiting -->
        <div class="card" id="rate-limiting">
            <h2>üö¶ Rate Limiting</h2>
            <ul>
                <li><strong>Default:</strong> 100 requests per minute per IP</li>
                <li><strong>Headers:</strong></li>
                <ul>
                    <li><code>X-RateLimit-Limit</code>: Request limit</li>
                    <li><code>X-RateLimit-Remaining</code>: Remaining requests</li>
                    <li><code>X-RateLimit-Reset</code>: Reset timestamp</li>
                </ul>
            </ul>
        </div>

        <!-- Webhooks -->
        <div class="card" id="webhooks">
            <h2>üîó Webhooks</h2>
            
            <h3>Session Events</h3>
            <p>The system can send webhooks for important session events:</p>

            <h4>Transfer Initiated</h4>
            <div class="code-block">
{
  <span class="string">"event"</span>: <span class="string">"transfer_initiated"</span>,
  <span class="string">"session_id"</span>: <span class="string">"session_123"</span>,
  <span class="string">"timestamp"</span>: <span class="string">"2025-01-18T10:00:00Z"</span>,
  <span class="string">"data"</span>: {
    <span class="string">"department"</span>: <span class="string">"sales"</span>,
    <span class="string">"estimated_wait_time"</span>: <span class="string">"2-3 minutes"</span>
  }
}
            </div>

            <h4>Session Completed</h4>
            <div class="code-block">
{
  <span class="string">"event"</span>: <span class="string">"session_completed"</span>,
  <span class="string">"session_id"</span>: <span class="string">"session_123"</span>,
  <span class="string">"timestamp"</span>: <span class="string">"2025-01-18T10:05:00Z"</span>,
  <span class="string">"data"</span>: {
    <span class="string">"duration_seconds"</span>: <span class="number">300</span>,
    <span class="string">"intent"</span>: <span class="string">"pricing"</span>,
    <span class="string">"final_status"</span>: <span class="string">"completed"</span>
  }
}
            </div>
        </div>

        <!-- Integration Examples -->
        <div class="card" id="integration">
            <h2>üíª Integration Examples</h2>

            <h3>JavaScript/Node.js</h3>
            <div class="code-block">
<span class="comment">// Get connection details</span>
<span class="keyword">const</span> connectionResponse = <span class="keyword">await</span> fetch(<span class="string">'/api/connection_details'</span>, {
  method: <span class="string">'POST'</span>,
  headers: {
    <span class="string">'Content-Type'</span>: <span class="string">'application/json'</span>,
  },
  body: JSON.stringify({
    participant_name: <span class="string">'user123'</span>,
    room_name: <span class="string">'session_123'</span>
  })
});

<span class="keyword">const</span> connectionData = <span class="keyword">await</span> connectionResponse.json();

<span class="comment">// Process message</span>
<span class="keyword">const</span> messageResponse = <span class="keyword">await</span> fetch(<span class="string">'/api/process_flow_message'</span>, {
  method: <span class="string">'POST'</span>,
  headers: {
    <span class="string">'Content-Type'</span>: <span class="string">'application/json'</span>,
  },
  body: JSON.stringify({
    room_name: <span class="string">'session_123'</span>,
    user_message: <span class="string">'I need pricing information'</span>,
    conversation_history: []
  })
});

<span class="keyword">const</span> messageData = <span class="keyword">await</span> messageResponse.json();
console.log(<span class="string">'Flow result:'</span>, messageData.flow_result);
            </div>

            <h3>Python</h3>
            <div class="code-block">
<span class="keyword">import</span> requests

<span class="comment"># Get connection details</span>
connection_response = requests.post(<span class="string">'/api/connection_details'</span>, json={
    <span class="string">'participant_name'</span>: <span class="string">'user123'</span>,
    <span class="string">'room_name'</span>: <span class="string">'session_123'</span>
})

connection_data = connection_response.json()

<span class="comment"># Process message</span>
message_response = requests.post(<span class="string">'/api/process_flow_message'</span>, json={
    <span class="string">'room_name'</span>: <span class="string">'session_123'</span>,
    <span class="string">'user_message'</span>: <span class="string">'I need pricing information'</span>,
    <span class="string">'conversation_history'</span>: []
})

message_data = message_response.json()
print(<span class="string">'Flow result:'</span>, message_data[<span class="string">'flow_result'</span>])
            </div>

            <h3>cURL</h3>
            <div class="code-block">
<span class="comment"># Get connection details</span>
curl -X POST http://localhost:8000/api/connection_details \
  -H <span class="string">"Content-Type: application/json"</span> \
  -d <span class="string">'{
    "participant_name": "user123",
    "room_name": "session_123"
  }'</span>

<span class="comment"># Process message</span>
curl -X POST http://localhost:8000/api/process_flow_message \
  -H <span class="string">"Content-Type: application/json"</span> \
  -d <span class="string">'{
    "room_name": "session_123",
    "user_message": "I need pricing information",
    "conversation_history": []
  }'</span>
            </div>
        </div>

        <!-- Testing -->
        <div class="card" id="testing">
            <h2>üß™ Testing</h2>

            <h3>Test Endpoints</h3>

            <h4>Test Intent Detection</h4>
            <div class="endpoint">
                <h5><span class="method post">POST</span> /api/test_intent_detection</h5>
                <div class="code-block">
{
  <span class="string">"user_message"</span>: <span class="string">"I need pricing information"</span>,
  <span class="string">"conversation_history"</span>: []
}
                </div>
            </div>

            <h4>Get Template Info</h4>
            <div class="endpoint">
                <h5><span class="method get">GET</span> /api/template_info</h5>
                <p>Returns current bot template information and available intents.</p>
            </div>

            <h4>Get Flow State</h4>
            <div class="endpoint">
                <h5><span class="method get">GET</span> /api/flow_state/{room_name}</h5>
                <p>Returns current flow state for a specific room.</p>
            </div>
        </div>

        <!-- Monitoring -->
        <div class="card" id="monitoring">
            <h2>üìä Monitoring</h2>

            <h3>Health Check</h3>
            <ul>
                <li><strong>Endpoint:</strong> <code>/health</code></li>
                <li><strong>Frequency:</strong> Every 30 seconds</li>
                <li><strong>Alerts:</strong> Email/SMS on failure</li>
            </ul>

            <h3>Metrics</h3>
            <ul>
                <li>Response times</li>
                <li>Error rates</li>
                <li>Session durations</li>
                <li>Intent detection accuracy</li>
                <li>Transfer success rates</li>
            </ul>
        </div>

        <!-- Security -->
        <div class="card" id="security">
            <h2>üîí Security</h2>

            <h3>Authentication</h3>
            <ul>
                <li>JWT tokens with expiration</li>
                <li>Secure token generation</li>
                <li>Automatic token refresh</li>
            </ul>

            <h3>Data Protection</h3>
            <ul>
                <li>All data encrypted in transit (HTTPS)</li>
                <li>Sensitive data encrypted at rest</li>
                <li>GDPR compliant data handling</li>
            </ul>

            <h3>Rate Limiting</h3>
            <ul>
                <li>IP-based rate limiting</li>
                <li>Per-user rate limiting</li>
                <li>DDoS protection</li>
            </ul>
        </div>

        <!-- Footer -->
        <div class="card" style="text-align: center; background: linear-gradient(135deg, #667eea, #764ba2); color: white;">
            <h2 style="color: white; border-bottom: 3px solid white;">Support</h2>
            <p style="font-size: 1.2rem; margin: 20px 0;">
                For additional support or questions, please contact the development team.
            </p>
        </div>
    </div>
</body>
</html>
