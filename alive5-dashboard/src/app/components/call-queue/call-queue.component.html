<div class="call-queue-container">
  <div class="queue-header">
    <div class="header-content">
      <svg class="header-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M3 5a2 2 0 0 1 2-2h3.28a1 1 0 0 1 .948.684l1.498 4.493a1 1 0 0 1-.502 1.21l-2.257 1.13a11.042 11.042 0 0 0 5.516 5.516l1.13-2.257a1 1 0 0 1 1.21-.502l4.493 1.498a1 1 0 0 1 .684.949V19a2 2 0 0 1-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
      </svg>
      <div class="header-text">
        <h2>Call Queue</h2>
        <span class="status-badge" [class.active]="incomingCalls.length > 0">
          <span class="status-dot"></span>
          {{ incomingCalls.length > 0 ? 'Active' : 'Standby' }}
        </span>
      </div>
    </div>
    <div class="queue-count" [class.has-calls]="incomingCalls.length > 0">
      {{ incomingCalls.length }}
    </div>
  </div>

  <div class="calls-list" *ngIf="incomingCalls.length > 0">
    <div class="call-card" *ngFor="let call of incomingCalls; let i = index" [style.animation-delay.ms]="i * 100">
      <div class="card-priority">
        <svg viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
        </svg>
      </div>
      
      <div class="call-header">
        <span class="call-queue-badge">{{ call.queue }}</span>
        <span class="call-timestamp">{{ formatTime(call.timestamp) }}</span>
      </div>
      
      <div class="call-info">
        <div class="info-row main">
          <svg class="info-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
            <circle cx="12" cy="7" r="4"/>
          </svg>
          <span class="caller-phone">{{ call.caller_phone || 'Unknown' }}</span>
        </div>
        <div class="info-row">
          <svg class="info-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
            <circle cx="12" cy="10" r="3"/>
          </svg>
          <span class="thread-id">Thread: {{ call.thread_id.substring(0, 8) }}...</span>
        </div>
        <div class="info-row waiting">
          <svg class="info-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <polyline points="12 6 12 12 16 14"/>
          </svg>
          <span class="waiting-time">Waiting: {{ getWaitingTime(call.timestamp) }}</span>
        </div>
      </div>
      
      <div class="call-context" *ngIf="call.context">
        <div class="context-label">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <line x1="12" y1="16" x2="12" y2="12"/>
            <line x1="12" y1="8" x2="12.01" y2="8"/>
          </svg>
          Context
        </div>
        <p>{{ call.context }}</p>
      </div>
      
      <div class="call-actions">
        <button class="btn btn-accept" (click)="acceptCall(call)">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
          </svg>
          Accept Call
        </button>
        <button class="btn btn-reject" (click)="rejectCall(call)">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
    </div>
  </div>

  <div class="empty-state" *ngIf="incomingCalls.length === 0">
    <div class="empty-icon-wrapper">
      <svg class="empty-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
      </svg>
    </div>
    <h3>All Clear</h3>
    <p>No incoming calls at the moment</p>
    <p class="empty-subtext">You'll be notified when a call needs assistance</p>
  </div>
</div>
